<AskId>
    layout_widget: askid_label
    id: ask_id

    AnchorLayout:
        anchor_x: 'right'
        anchor_y: 'top'
        pos_hint: {'top': 0.5 + self.size_hint[1]/2}
    Button:
        text: 'x'
        color: 1.0, 0.0, 0.0, 1.0
        font_size: 50
        size_hint: None, None
        background_color: 0, 0, 0, 0
        on_press:
            AskId().stop()

    BoxLayout:
        orientation: 'vertical'
        size: root.width, root.height

        BoxLayout:
            size_hint: 1, .3
            padding: 10
            spacing: 10
            canvas.before:
                Color:
                    rgba: (0,0,0.53,0.2)
                Rectangle:
                    size: self.size
                    pos: self.pos
            Label:
                
                text: "Entrez votre id"
                font_size: '90dp'

        BoxLayout:
            size_hint: 1, 1
            padding: 40
            spacing: 40

            canvas.before:
                Color:
                    rgba: (0,0,0.53,0.2)
                Rectangle:
                    size: self.size
                    pos: self.pos
            Label:
                id: askid_label
                text: "0"
                font_size: '120dp'

            GridLayout:
                padding: 2
                spacing:4
                canvas.before:
                    Color:
                        rgba: (0,0,0.53,0.2)
                        
                cols: 3

                Button:
                    text: "7"
                Button:
                    text: "8"
                Button:
                    text: "9"
                Button:
                    text: "4"
                Button:
                    text: "5"
                Button:
                    text: "6"      
                
                Button:
                    text: "1"
                Button:
                    text: "2"
                Button:
                    text: "3"      

                Button:
                    text: "0"
                Button:
                    text: "."

                BoxLayout:
                    orientation: 'vertical'

                    size_hint: 1, 1
                    Button:
                        text: "Cancel"
                        background_color: (1.0, 0.0, 0.0, 1.0)
                        on_press:
                            root.deleteLine()
                    Button:
                        text: "Enter"
                        background_color: (0, 200, 0, .5)
                        on_release:
                            root.change_label_method()

<PopUpShow>:
    id : popup_id_unknown
    
    size: root.width, root.height
    canvas.before:
        Color:
            rgba: (0,0,0.53,0.2)

    Label:
        text: "Votre id est inconnu"
        size_hint: 0.6, 0.2
        pos_hint: {"x":0.2, "top":1}

    Button:
        background_color: (1.0, 0.0, 0.0, 1.0)
        text: "Retour"
        size_hint: 0.8, 0.2
        pos_hint: {"x":0.1, "y":0.1}


<MyGridLayout>
    id: calculator
    display: label
    result: labelResult
    
    BoxLayout:
        orientation: 'vertical'
        size: root.width, root.height
        Label:
            id: labelResult
            
            canvas.before: 
                Color: 
                    rgb: .13, .17, .18, 1
                Rectangle: 
                    pos: self.pos 
                    size: self.size
                    
            halign: 'center'
            valign: 'center'
            font_size: 40
            text_size: 550, None
            size_hint: 1, .15
            shorten: True
            shorten_from: 'right'

        Label:
            id: label
            
            canvas.before: 
                Color: 
                    rgb: .13, .17, .18, 1
                Rectangle: 
                    pos: self.pos 
                    size: self.size
            
            halign: 'right'
            valign: 'center'
            font_size: 90
            text_size: 550, None
            size_hint: 1, .35
            shorten: True
            shorten_from: 'right'

        BoxLayout:
            size_hint: 1, .1
            padding: 20
            spacing: 20
            canvas.before:
                Color:
                    rgba: (0,0,0.53,0.2)
                Rectangle:
                    size: self.size
                    pos: self.pos

            Button:
                text: "Add User"
                on_press: root.add_user()
            Button:
                text: "Modify User"
                on_press: root.modify_user()
            Button:
                text: "Add Menu"
                on_press: root.add_menu()
            Button:
                text: "Modify Menu"
                on_press: root.modify_menu()

        BoxLayout:
            size_hint: 1, 1
            padding: 40
            spacing: 40

            canvas.before:
                Color:
                    rgba: (0,0,0.53,0.2)
                Rectangle:
                    size: self.size
                    pos: self.pos
            Label:
                text: "INFO DATABASE ICI"

        
            GridLayout:
                padding: 2
                spacing:4
                canvas.before:
                    Color:
                        rgba: (0,0,0.53,0.2)
                        
                cols: 3
                Button:
                    text: '7'
                    
                    background_normal: ''
                    background_color: .2, .24, .26, 1
                    on_press: app.trigger = True
                    on_press:
                        if (app.triggerC): label.text = self.text
                        else: label.text += self.text
                        if (app.triggerC): app.triggerC = False
                    
                Button:
                    text: '8'
                    
                    background_normal: ''
                    background_color: .2, .24, .26, 1
                    on_press: app.trigger = True
                    on_press:
                        if (app.triggerC): label.text = self.text
                        else: label.text += self.text
                        if (app.triggerC): app.triggerC = False
                    
                Button:
                    text: '9'
                    
                    background_normal: ''
                    background_color: .2, .24, .26, 1
                    on_press: app.trigger = True
                    on_press:
                        if (app.triggerC): label.text = self.text
                        else: label.text += self.text
                        if (app.triggerC): app.triggerC = False
                    
                Button:
                    text: '4'
                    
                    background_normal: ''
                    background_color: .2, .24, .26, 1
                    on_press: app.trigger = True
                    on_press:
                        if (app.triggerC): label.text = self.text
                        else: label.text += self.text
                        if (app.triggerC): app.triggerC = False
                    
                Button:
                    text: '5'
                    
                    background_normal: ''
                    background_color: .2, .24, .26, 1
                    on_press: app.trigger = True
                    on_press:
                        if (app.triggerC): label.text = self.text
                        else: label.text += self.text
                        if (app.triggerC): app.triggerC = False
                    
                Button:
                    text: '6'
                    
                    background_normal: ''
                    background_color: .2, .24, .26, 1
                    on_press: app.trigger = True
                    on_press:
                        if (app.triggerC): label.text = self.text
                        else: label.text += self.text
                        if (app.triggerC): app.triggerC = False

                    
                Button:
                    text: '1'
                    
                    background_normal: ''
                    background_color: .2, .24, .26, 1
                    on_press: app.trigger = True
                    on_press:
                        if (app.triggerC): label.text = self.text
                        else: label.text += self.text
                        if (app.triggerC): app.triggerC = False
                    
                Button:
                    text: '2'
                    
                    background_normal: ''
                    background_color: .2, .24, .26, 1
                    on_press: app.trigger = True
                    on_press:
                        if (app.triggerC): label.text = self.text
                        else: label.text += self.text
                        if (app.triggerC): app.triggerC = False
                    
                Button:
                    text: '3'
                    
                    background_normal: ''
                    background_color: .2, .24, .26, 1
                    on_press: app.trigger = True
                    on_press:
                        if (app.triggerC): label.text = self.text
                        else: label.text += self.text
                        if (app.triggerC): app.triggerC = False
                    

                Button:
                    text: '0'
                    
                    background_normal: ''
                    background_color: .2, .24, .26, 1
                    on_press: app.trigger = True
                    on_press:
                        if (app.triggerC): label.text = self.text
                        else: label.text += self.text
                        if (app.triggerC): app.triggerC = False
                    
                Button:
                    text: '.'
                    
                    background_normal: ''
                    background_color: .2, .24, .26, 1
                    on_press:
                        if (app.trigger): label.text += self.text
                        if (app.trigger): app.triggerC = False
                        if (app.trigger): app.trigger = False

                BoxLayout:
                    orientation: 'vertical'

                    size_hint: 1, 1
                    Button:
                        text: "Cancel"
                        background_color: (1.0, 0.0, 0.0, 1.0)
                            
                    Button:
                        text: "Enter"
                        background_color: (0, 200, 0, .5)
                        on_press:
                            if (app.trigger): calculator.calc(label.text)
                            if (app.trigger): calculator.calc(labelResult.text)
                            if (app.trigger): app.triggerC = True
